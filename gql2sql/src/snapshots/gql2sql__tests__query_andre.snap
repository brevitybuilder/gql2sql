---
source: gql2sql/src/lib.rs
expression: statement.to_string()
---
SELECT json_build_object('agg', (SELECT json_build_object('count', COUNT(*)) AS "root" FROM (SELECT * FROM "User") AS "base"), 'User', (SELECT coalesce(json_agg(to_json((SELECT "root" FROM (SELECT "base"."id", "base"."created_at", "base"."updated_at", "base"."name", "base"."email", "base"."profile_image_url", "base"."gnHezR9MdBFH9kCthN3aB", "base"."hbpGXRJKzb3KczPKTiRP4", "base"."Kax3AYLAgYXqYfh8M9K6q", "base"."GXDMeKziKF7K8EJUMqUKY", "listings", "RecievedMessages", "Bookings", "Reviewer", "SentMessages") AS "root"))), '[]') AS "root" FROM (SELECT * FROM "User" ORDER BY "created_at" DESC LIMIT $1 OFFSET $2) AS "base" LEFT JOIN LATERAL (SELECT json_build_object('count', COUNT(*)) AS "listings" FROM (SELECT * FROM "H33iDwNVqqMxAnVEgPaTh" WHERE "H33iDwNVqqMxAnVEgPaTh"."Gb8jAGqGDbYqfeqDDxKUF_id" = "base"."id") AS "base.H33iDwNVqqMxAnVEgPaTh") AS "listings.H33iDwNVqqMxAnVEgPaTh" ON ('true') LEFT JOIN LATERAL (SELECT json_build_object('count', COUNT(*)) AS "RecievedMessages" FROM (SELECT * FROM "BVeNWQDQ68cMtrgicenb8" WHERE "BVeNWQDQ68cMtrgicenb8"."rKcrnCVVYTjtVWkjbQRdp_id" = "base"."id") AS "base.BVeNWQDQ68cMtrgicenb8") AS "RecievedMessages.BVeNWQDQ68cMtrgicenb8" ON ('true') LEFT JOIN LATERAL (SELECT json_build_object('count', COUNT(*)) AS "Bookings" FROM (SELECT * FROM "BxDJ7CAhDYT47dKpDGnCP" WHERE "BxDJ7CAhDYT47dKpDGnCP"."QJA6HybjgX8ddWtk8XhWW_id" = "base"."id") AS "base.BxDJ7CAhDYT47dKpDGnCP") AS "Bookings.BxDJ7CAhDYT47dKpDGnCP" ON ('true') LEFT JOIN LATERAL (SELECT json_build_object('count', COUNT(*)) AS "Reviewer" FROM (SELECT * FROM "Fjjm3XAhyDmbhzymrrkRT" WHERE "Fjjm3XAhyDmbhzymrrkRT"."ezgmFyPD6z7NmQhDbGRHg_id" = "base"."id") AS "base.Fjjm3XAhyDmbhzymrrkRT") AS "Reviewer.Fjjm3XAhyDmbhzymrrkRT" ON ('true') LEFT JOIN LATERAL (SELECT json_build_object('count', COUNT(*)) AS "SentMessages" FROM (SELECT * FROM "BVeNWQDQ68cMtrgicenb8" WHERE "BVeNWQDQ68cMtrgicenb8"."iyja9R3cWMkQ63c8jakHX_id" = "base"."id") AS "base.BVeNWQDQ68cMtrgicenb8") AS "SentMessages.BVeNWQDQ68cMtrgicenb8" ON ('true'))) AS "data"
